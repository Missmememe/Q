<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üéâ Birthday Quest</title>
  <style>
    :root{ --bg:#0f0f12; --card:#17171c; --muted:#a3a3b2; --accent:#e95d8c; --ok:#43d17d; }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", sans-serif; background:#0f0f12; color:#f7f7fb; line-height:1.5}
    a{text-decoration:none}
    .app{max-width:860px; margin:0 auto; padding:24px 16px 56px}
    .card{background:linear-gradient(180deg, #1d1d25 0%, #111114 100%); border:1px solid #2a2a33; border-radius:20px; padding:24px; box-shadow:0 10px 30px #00000070}
    header{display:flex; align-items:center; gap:16px; margin-bottom:16px}
    header .emoji{font-size:34px}
    h1{font-size:28px; margin:0}
    p.lead{margin:4px 0 0; color:var(--muted)}
    .hidden{display:none}
    .q{margin-top:18px}
    .q h2{font-size:20px; margin:0 0 10px}
    .input{display:flex; gap:10px}
    input[type="text"]{flex:1; padding:12px 14px; border-radius:12px; border:1px solid #30303a; background:#0d0d10; color:#fff; outline:none}
    button{border:0; padding:12px 16px; border-radius:12px; background:var(--accent); color:#fff; font-weight:600; cursor:pointer}
    button.secondary{background:#2a2a33}
    button:disabled{opacity:.6; cursor:not-allowed}
    .msg{margin-top:10px; font-size:14px}
    .msg.ok{color:var(--ok)}
    .msg.err{color:#ff6b6b}
    .prize{margin-top:18px; padding:16px; border-radius:16px; background:#121217; border:1px dashed #2f2f39}
    .prize h3{margin:0 0 8px; font-size:18px}
    .prize p{margin:0; color:var(--muted)}
    .prize .actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap}
    .tag{display:inline-block; padding:6px 10px; border-radius:999px; background:#23232b; color:#d9d9e0; font-size:12px}
    .progress{height:8px; background:#20202a; border-radius:999px; overflow:hidden; margin:18px 0}
    .bar{height:100%; width:0%; background:linear-gradient(90deg, var(--accent), #8a6fe8)}
    footer{margin-top:28px; color:var(--muted); font-size:12px}

    /* –ï–∫—Ä–∞–Ω –ø–∞—Ä–æ–ª—è */
    .gate{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px}
    .gate .panel{max-width:520px; width:100%; background:#17171c; border:1px solid #2a2a33; border-radius:20px; padding:24px; text-align:center}
    .gate h1{margin:0 0 6px 0}
    .gate p{margin:0; color:var(--muted)}
    noscript{display:block; background:#2a2a33; color:#fff; padding:12px; text-align:center}
  </style>
</head>
<body>
  <noscript>–¶–µ–π –∫–≤–µ—Å—Ç –ø–æ—Ç—Ä–µ–±—É—î –≤–≤—ñ–º–∫–Ω–µ–Ω–æ–≥–æ JavaScript.</noscript>

  <!-- –ï–∫—Ä–∞–Ω-–∑–∞—Å—Ç–∞–≤–∫–∞ –∑ –ø–∞—Ä–æ–ª–µ–º -->
  <div id="screen-gate" class="gate">
    <div class="panel">
      <div style="font-size:40px; margin-bottom:6px">üîí</div>
      <h1>–î–æ—Å—Ç—É–ø –æ–±–º–µ–∂–µ–Ω–∏–π</h1>
      <p>–Ø–∫ –°–æ–Ω–µ—á–∫–æ —Ç–µ–±–µ –Ω–∞–∑–∏–≤–∞—î?</p>
      <div class="q" style="margin-top:14px">
        <div class="input">
          <input id="gate-answer" type="text" placeholder="–í–≤–µ–¥–∏ —Ñ—Ä–∞–∑—É" autocomplete="off" />
          <button id="gate-check" type="button">–£–≤—ñ–π—Ç–∏</button>
        </div>
        <div class="msg" id="gate-msg"></div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (–∫–≤–µ—Å—Ç) -->
  <div id="app-shell" class="hidden">
    <div class="app">
      <div class="card">
        <header>
          <div class="emoji">üéâ</div>
          <div>
            <h1>Birthday Quest</h1>
            <p class="lead">7 –∑–∞–ø–∏—Ç–∞–Ω—å ‚Üí 7 –ø—Ä–∏–∑—ñ–≤. –ì—Ä–∞–π —á–µ—Å–Ω–æ. –ü–∏—à–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å–ª–æ–≤–∞–º–∏ üòâ</p>
          </div>
        </header>

        <div class="progress" aria-label="–ü—Ä–æ–≥—Ä–µ—Å –ø—Ä–æ—Ö–æ–¥–∂–µ–Ω–Ω—è"><div class="bar" id="bar"></div></div>

        <div id="screen-start" class="q">
          <h2>–ì–æ—Ç–æ–≤–∏–π? –ù–∞—Ç–∏—Å–Ω–∏, —â–æ–± –ø–æ—á–∞—Ç–∏.</h2>
          <button id="btn-start" type="button">–ü–æ—á–∞—Ç–∏ –≥—Ä—É</button>
        </div>

        <div id="screen-quiz" class="hidden">
          <div class="q">
            <div class="tag" id="q-index">1 / 7</div>
            <h2 id="q-text">–ü–∏—Ç–∞–Ω–Ω—è‚Ä¶</h2>
            <div class="input">
              <input id="answer" type="text" placeholder="–í–≤–µ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Å–ª–æ–≤–∞–º–∏" autocomplete="off" />
              <button id="btn-check" type="button">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
            </div>
            <div class="msg" id="msg"></div>
            <div class="prize hidden" id="prize">
              <h3 id="prize-title">–ü—Ä–∏–∑</h3>
              <p id="prize-text">–û–ø–∏—Å –ø—Ä–∏–∑—É –∞–±–æ –Ω–∞—Ç—è–∫.</p>
              <div class="actions" id="prize-actions"></div>
            </div>
            <div class="nav" style="display:flex; justify-content:space-between; margin-top:16px">
              <button id="btn-hint" class="secondary" type="button">–ü—ñ–¥–∫–∞–∑–∫–∞</button>
              <button id="btn-next" class="hidden" type="button">–î–∞–ª—ñ ‚Üí</button>
            </div>
          </div>
        </div>

        <div id="screen-end" class="hidden">
          <h2>‚ú® –ö–≤–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω–æ!</h2>
          <p class="lead">–¢–∏ –≤—ñ–¥–∫—Ä–∏–≤ —É—Å—ñ –ø—Ä–∏–∑–∏. –ü–µ—Ä–µ–≤—ñ—Ä –ø–æ—à—Ç—É/–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Äî —Ç–∞–º –Ω–∞ —Ç–µ–±–µ —á–µ–∫–∞—î —â–µ –æ–¥–∏–Ω —Å—é—Ä–ø—Ä–∏–∑ üíå</p>
          <div class="prize">
            <h3>–§—ñ–Ω–∞–ª—å–Ω–µ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è</h3>
            <p>–ü–µ—Ä–µ–≥–ª—è–Ω—å –≥–æ–ª–æ–≤–Ω–µ –≤—ñ–¥–µ–æ-–ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è —Ç—É—Ç:</p>
            <div class="actions"><a id="final-video" href="#" target="_blank" rel="noopener"><button type="button">–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤—ñ–¥–µ–æ</button></a></div>
          </div>
        </div>

        <footer>
          <p>–ó—Ä–æ–±–ª–µ–Ω–æ –∑ –ª—é–±–æ–≤'—é. –ü—ñ–¥–∫–∞–∑–∫–∞: –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–µ —á—É—Ç–ª–∏–≤—ñ –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É, –∑–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏ —ñ –º'—è–∫—ñ –∞–ø–æ—Å—Ç—Ä–æ—Ñ–∏ —ñ–≥–Ω–æ—Ä—É—é—Ç—å—Å—è.</p>
          <p style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Liberation Mono', 'DejaVu Sans Mono', 'Courier New', monospace; font-size:12px; color:#bdbdd2">
            –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è: –≤—ñ–¥–∫—Ä–∏–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ ‚Äî —Ç–∞–º —î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Å–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.
          </p>
        </footer>
      </div>
    </div>
  </div>

  <script>
  // –ë–µ–∑–ø–µ—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ DOM
  document.addEventListener('DOMContentLoaded', () => {
    try {
      // ‚Äî‚Äî‚Äî –£—Ç–∏–ª—ñ—Ç–∏ ‚Äî‚Äî‚Äî
      // –ë–µ–∑ Unicode property escapes (—Å—É–º—ñ—Å–Ω–æ –∑ —É—Å—ñ–º–∞ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏)
      const normalize = (s) => (s||"")
        .toLowerCase()
        .replace(/[` º'‚Äô]/g, "'")
        .replace(/[^a-z–∞-—â—å—é—è—î—ñ—ó“ë0-9'\s-]+/gi, "")
        .replace(/\s+/g, " ")
        .trim();

      // ‚Äî‚Äî‚Äî –ü–∞—Ä–æ–ª—å–Ω–∞ –∑–∞—Å—Ç–∞–≤–∫–∞ ‚Äî‚Äî‚Äî
      const GATE = { answers: ["–Ω–µ –∑–∞–Ω—É–¥–∞", "–Ω–µ–∑–∞–Ω—É–¥–∞", "–Ω–µ-–∑–∞–Ω—É–¥–∞"], failText: "–•–º‚Ä¶ –ê —Ç–æ—á–Ω–æ –°–æ–Ω–µ—á–∫–æ —Ç–∞–∫ –∫–∞–∑–∞–ª–æ? üòâ" };

      const screenGate = document.getElementById('screen-gate');
      const appShell   = document.getElementById('app-shell');
      const gateAnswer = document.getElementById('gate-answer');
      const gateCheck  = document.getElementById('gate-check');
      const gateMsg    = document.getElementById('gate-msg');

      function checkGate(){
        const val = normalize(gateAnswer.value);
        if (GATE.answers.map(normalize).includes(val)){
          gateMsg.textContent = '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ ‚ú®';
          gateMsg.className = 'msg ok';
          setTimeout(()=>{
            screenGate.classList.add('hidden');
            appShell.classList.remove('hidden');
            const sBtn = document.getElementById('btn-start');
            if(sBtn) sBtn.focus();
          }, 300);
        } else {
          gateMsg.textContent = GATE.failText;
          gateMsg.className = 'msg err';
        }
      }
      gateCheck.addEventListener('click', checkGate);
      gateAnswer.addEventListener('keydown', (e)=>{ if(e.key==='Enter') checkGate(); });

      // ‚Äî‚Äî‚Äî –ö–æ–Ω—Ç–µ–Ω—Ç –∫–≤–µ—Å—Ç—É ‚Äî‚Äî‚Äî
      const STEPS = [
        { q: "–Ø–∫–æ–≥–æ —á–∏—Å–ª–∞ —ñ –º—ñ—Å—è—Ü—è –º–∏ –ø–æ–∑–Ω–∞–π–æ–º–∏–ª–∏—Å—è? (–≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–æ–ø–∏—Å–æ–º)", answers: ["–¥—Ä—É–≥–æ–≥–æ –±–µ—Ä–µ–∑–Ω—è"], hint: "–ó–≥–∞–¥–∞—î—à –Ω–∞—à –ø–µ—Ä—à–∏–π –¥–µ–Ω—å‚Ä¶ –≤–µ—Å–Ω–∞ üòâ", prize: { title: "–í—ñ—Ç–∞–ª—å–Ω–∞ –ª–∏—Å—Ç—ñ–≤–∫–∞", text: "–¢–≤–æ—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞ –ª–∏—Å—Ç—ñ–≤–∫–∞ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ", links: [ { label: "–í—ñ–¥–∫—Ä–∏—Ç–∏ –ª–∏—Å—Ç—ñ–≤–∫—É", href: "./prizes/birthday-card.jpg" } ] } },
        { q: "–Ø–∫ —Ç–∏ —Å–µ–±–µ –ª—é–±–∏—à –Ω–∞–∑–∏–≤–∞—Ç–∏? (–ø—ñ–¥–∫–∞–∑–∫–∞: –° –ü –û)", answers: ["—Å—Ç–∞—Ä–∞ –ø–æ–π–æ–±–∞–Ω–∞ –æ–Ω–¥–∞—Ç—Ä–∞"], hint: "–¢—Ä–∏ —Å–ª–æ–≤–∞. –Ü–Ω—ñ—Ü—ñ–∞–ª–∏: –° –ü –û.", prize: { title: "–ñ–∞—Ä—Ç—ñ–≤–ª–∏–≤–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞", text: "–¢—Ä–æ—Ö–∏ –∞–±—Å—É—Ä–¥—É –¥–ª—è —ñ–¥–µ–∞–ª—å–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ—é", links: [ { label: "–ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –º–µ–º (–æ–∫—Å—ñ–¥—Ä–æ—á–µ—Ä)", href: "./prizes/funny-joke.png" } ] } },
        { q: "–Ø–∫ –º–µ–Ω–µ –∑–≤–∞—Ç–∏?", answers: ["—é–ª—ñ–∞–Ω–Ω–∞", "—é–ª—ñ–∞–Ω–∞"], hint: "–ü–∏—à–µ—Ç—å—Å—è —á–µ—Ä–µ–∑ –Æ‚Ä¶", prize: { title: "–õ–∏—Å—Ç –≤—ñ–¥ –º–µ–Ω–µ (PDF)", text: "–¢–µ, —â–æ —Ö–æ—Ç—ñ–ª–∞ —Å–∫–∞–∑–∞—Ç–∏ —Ç–æ–±—ñ —Å—å–æ–≥–æ–¥–Ω—ñ", links: [ { label: "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ PDF", href: "./prizes/love-letter.pdf", download: true } ] } },
        { q: "–ó —è–∫–æ—é –∫–≤—ñ—Ç–∫–æ—é —Ç–µ–±–µ –∞—Å–æ—Ü—ñ—é–≤–∞–ª–∞ –ü–∞–Ω—ñ?", answers: ["–µ–¥–µ–ª—å–≤–µ–π—Å", "–µ–¥–µ–ª–≤–µ–π—Å"], hint: "–ì—ñ—Ä—Å—å–∫–∞ —Ä—ñ–¥–∫—ñ—Å–Ω–∞ –∫–≤—ñ—Ç–∫–∞", prize: { title: "Playboy-style —Å—é—Ä–ø—Ä–∏–∑", text: "–õ–µ–≥–∫–∞ –ø—ñ–∫–∞–Ω—Ç–Ω—ñ—Å—Ç—å —É —Å–≤—è—Ç–∫–æ–≤–æ–º—É —Å—Ç–∏–ª—ñ", links: [ { label: "–í—ñ–¥–∫—Ä–∏—Ç–∏ –æ–±–∫–ª–∞–¥–∏–Ω–∫—É", href: "./prizes/playboy-style-cover.jpg" } ] } },
        { q: "–í—ñ–∑—å–º–∏ –∫–æ–∂–Ω—É –±—É–∫–≤—É –ø–æ —á–µ—Ä–∑—ñ (1-—à–∞, 2-–≥–∞‚Ä¶), 'my nobby mate honor nowcz derbby maverik bestival'", answers: ["–º–æ—Ç–æ—Ü–∏–∫–ª"], hint: "–î–≤—ñ –∫–æ–ª—ñ—Å–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç—ñ‚Ä¶", prize: { title: "–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –±–∞–π–∫", text: "–û—Ñ—ñ—Ü—ñ–π–Ω–æ. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ. –ü–æ—ó—Ö–∞–ª–∏!", links: [ { label: "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (PDF)", href: "./prizes/bike-gift-certificate.pdf", download: true } ] } },
        { q: "–©–æ —è –∫–æ–ª–∏—Å—å –æ–±—ñ—Ü—è–ª–∞ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ —Ç–æ–±—ñ –Ω–∞ –¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è? (–ø—ñ–¥–∫–∞–∑–∫–∞: —Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ —á–µ—Ä–≤–æ–Ω–µ–Ω—å–∫—ñ)", answers: ["—Ç—Ä—É—Å–∏–∫–∏", "–ø–∞–Ω—Ç–∞–ª–∫–∏", "–ø–ª–∞–≤–∫–∏"], hint: "–ú–∞–ª–µ–Ω—å–∫–∏–π —Ç–µ–∫—Å—Ç–∏–ª—å —ñ–∑ –≤–µ–ª–∏–∫–∏–º –Ω–∞—Å—Ç—Ä–æ—î–º", prize: { title: "–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –µ—Ä–æ—Ç–∏—á–Ω—ñ —Ç–æ–≤–∞—Ä–∏", text: "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π –∑ —Ä–æ–∑—É–º–æ–º —ñ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è–º üòè", links: [ { label: "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (PDF)", href: "./prizes/erotic-shop-gift-certificate.pdf", download: true } ] } },
        { q: "–§—ñ–Ω–∞–ª: —è–∫–µ –º–æ—î –≥–æ–ª–æ–≤–Ω–µ –±–∞–∂–∞–Ω–Ω—è –¥–ª—è —Ç–µ–±–µ —Å—å–æ–≥–æ–¥–Ω—ñ?", answers: ["—â–∞—Å—Ç—è","–∫–æ—Ö–∞–Ω–Ω—è","–ø–µ—Ä–µ–º–æ–≥–∞","–∑–¥–æ—Ä–æ–≤—è","–∑–¥–æ—Ä–æ–≤'—è","—É—Å–º—ñ—à–∫–∏","—Ä–∞–¥—ñ—Å—Ç—å"], hint: "–¢–µ, —â–æ –≥—Ä—ñ—î –∑—Å–µ—Ä–µ–¥–∏–Ω–∏ üíñ", prize: { title: "–ì–æ–ª–æ–≤–Ω–µ –≤—ñ–¥–µ–æ-–ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è", text: "–ù–∞—Ç–∏—Å–Ω–∏, —â–æ–± –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ—ñ–Ω–∞–ª", links: [ { label: "–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –≤—ñ–¥–µ–æ", href: "https://example.com/video" } ] } }
      ];

      // ‚Äî‚Äî‚Äî –ó–º—ñ–Ω–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É ‚Äî‚Äî‚Äî
      const start = document.getElementById('screen-start');
      const quiz  = document.getElementById('screen-quiz');
      const end   = document.getElementById('screen-end');
      const qText = document.getElementById('q-text');
      const qIndex= document.getElementById('q-index');
      const answerEl = document.getElementById('answer');
      const btnStart = document.getElementById('btn-start');
      const btnCheck = document.getElementById('btn-check');
      const btnHint  = document.getElementById('btn-hint');
      const btnNext  = document.getElementById('btn-next');
      const msg   = document.getElementById('msg');
      const prizeBox = document.getElementById('prize');
      const prizeTitle = document.getElementById('prize-title');
      const prizeText = document.getElementById('prize-text');
      const prizeActions = document.getElementById('prize-actions');
      const bar   = document.getElementById('bar');
      const finalVideo = document.getElementById('final-video');

      let i = 0;

      function updateProgress(){
        const pct = Math.round((i)/STEPS.length*100);
        bar.style.width = pct + '%';
      }
      function renderStep(){
        const step = STEPS[i];
        qText.textContent = step.q;
        qIndex.textContent = `${i+1} / ${STEPS.length}`;
        answerEl.value = '';
        msg.textContent = '';
        msg.className = 'msg';
        prizeBox.classList.add('hidden');
        btnNext.classList.add('hidden');
        updateProgress();
        setTimeout(()=>answerEl && answerEl.focus(), 50);
      }
      function showPrize(prize){
        prizeTitle.textContent = prize.title;
        prizeText.textContent = prize.text;
        prizeActions.innerHTML = '';
        (prize.links||[]).forEach(link => {
          const a = document.createElement('a');
          a.href = link.href || '#';
          a.target = '_blank';
          a.rel = 'noopener';
          if(link.download) a.setAttribute('download','');
          const b = document.createElement('button');
          b.type = 'button';
          b.textContent = link.label || '–í—ñ–¥–∫—Ä–∏—Ç–∏';
          a.appendChild(b);
          prizeActions.appendChild(a);
        });
        prizeBox.classList.remove('hidden');
      }
      function check(){
        const step = STEPS[i];
        const val = normalize(answerEl.value);
        const ok = step.answers.map(normalize).includes(val);
        if(ok){
          msg.textContent = '–í—ñ—Ä–Ω–æ!';
          msg.className = 'msg ok';
          showPrize(step.prize);
          btnNext.classList.remove('hidden');
        } else {
          msg.textContent = '–ù–µ –∑–æ–≤—Å—ñ–º. –°–ø—Ä–æ–±—É–π —â–µ –∞–±–æ –Ω–∞—Ç–∏—Å–Ω–∏ ¬´–ü—ñ–¥–∫–∞–∑–∫–∞¬ª.\n–ü–∏—à–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —Å–ª–æ–≤–∞–º–∏ (–±–µ–∑ —Ü–∏—Ñ—Ä).';
          msg.className = 'msg err';
        }
      }

      // ‚Äî‚Äî‚Äî –ù–∞–≤—ñ–≥–∞—Ü—ñ—è ‚Äî‚Äî‚Äî
      btnStart.addEventListener('click', () => {
        start.classList.add('hidden');
        quiz.classList.remove('hidden');
        i = 0; renderStep();
      });
      btnCheck.addEventListener('click', check);
      answerEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') check(); });
      btnHint.addEventListener('click', ()=>{
        const step = STEPS[i];
        msg.textContent = step.hint || '–ë–µ–∑ –ø—ñ–¥–∫–∞–∑–æ–∫ üòâ';
        msg.className = 'msg';
      });
      btnNext.addEventListener('click', ()=>{
        i++;
        if(i >= STEPS.length){
          quiz.classList.add('hidden');
          end.classList.remove('hidden');
          bar.style.width = '100%';
          const last = STEPS[STEPS.length-1];
          const link = (last.prize.links && last.prize.links[0] && last.prize.links[0].href) || '#';
          finalVideo.href = link;
        } else {
          renderStep();
        }
      });

      // ‚Äî‚Äî‚Äî –°–∞–º–æ–ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ ("—Ç–µ—Å—Ç–∏") ‚Äî‚Äî‚Äî
      (function runSelfTests(){
        try {
          const eq = (a,b)=>a===b;
          console.assert(eq(normalize(" –ù–µ  –ó–∞–Ω—É–¥–∞ "), "–Ω–µ –∑–∞–Ω—É–¥–∞"), 'normalize fails on spacing');
          console.assert(["–Ω–µ –∑–∞–Ω—É–¥–∞","–Ω–µ–∑–∞–Ω—É–¥–∞","–Ω–µ-–∑–∞–Ω—É–¥–∞"].some(a=>normalize(a)===normalize("–ù–µ –ó–∞–Ω—É–¥–∞")), 'gate answers equivalence');
          console.assert(Array.isArray(STEPS) && STEPS.length===7, 'There must be 7 steps');
          console.assert(STEPS[0].answers.includes("–¥—Ä—É–≥–æ–≥–æ –±–µ—Ä–µ–∑–Ω—è"), 'Q1 expected answer');
          console.assert(STEPS[5].answers.some(a=>a.includes('—Ç—Ä—É—Å')), 'Q6 lingerie answer expected');
          console.assert(STEPS[0].prize.links[0].href.includes('birthday-card.jpg'), 'Q1 prize path updated');
          console.log('%cSelf-tests passed','color:#43d17d');
        } catch(e){ console.warn('Self-tests error', e); }
      })();
    } catch(err){
      console.error('Init error', err);
      const g = document.getElementById('gate-msg');
      if(g){ g.textContent = '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –°–ø—Ä–æ–±—É–π –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É.'; g.className='msg err'; }
    }
  });
  </script>
</body>
</html>
